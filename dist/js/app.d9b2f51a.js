(function(){var e={8051:function(e,t,s){"use strict";var a=s(5130),r=s(6768),o=s(4232);function n(e,t,s,n,l,i){const c=(0,r.g2)("AppHeader"),d=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)([e.appTheme,"pt-0.5"])},[(0,r.bF)(c),(0,r.bF)(a.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{theme:e.appTheme},null,8,["theme"])])),_:1})],2)}const l={id:"nav",class:"sm:container sm:mx-auto"},i={class:"z-10 max-w-screen-lg xl:max-w-screen-xl block sm:flex sm:justify-between sm:items-center my-6"},c={class:"flex justify-between items-center px-4 sm:px-0"},d={class:"sm:hidden"},u={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-7 w-7 fill-current text-secondary-dark dark:text-ternary-light"},p={key:0,"fill-rule":"evenodd",d:"M18.278 16.864a1 1 0 0 1-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 0 1-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 0 1 1.414-1.414l4.829 4.828 4.828-4.828a1 1 0 1 1 1.414 1.414l-4.828 4.829 4.828 4.828z","clip-rule":"evenodd"},h={key:1,"fill-rule":"evenodd",d:"M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"},m={class:"hidden sm:flex justify-between items-center flex-col md:flex-row"};function g(e,t,s,a,o,n){const g=(0,r.g2)("theme-switcher");return(0,r.uX)(),(0,r.CE)("nav",l,[(0,r.Lk)("div",i,[(0,r.Lk)("div",c,[(0,r.bF)(g,{theme:o.theme,onThemeChanged:n.updateTheme,class:"block sm:hidden bg-ternary-light dark:bg-ternary-dark hover:bg-hover-light dark:hover:bg-hover-dark hover:shadow-sm px-2.5 py-2 rounded-lg"},null,8,["theme","onThemeChanged"]),(0,r.Lk)("div",d,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>o.isOpen=!o.isOpen),type:"button",class:"focus:outline-none","aria-label":"Hamburger Menu"},[((0,r.uX)(),(0,r.CE)("svg",u,[o.isOpen?((0,r.uX)(),(0,r.CE)("path",p)):(0,r.Q3)("",!0),o.isOpen?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("path",h))]))])])]),(0,r.Lk)("div",m,[(0,r.bF)(g,{theme:o.theme,onThemeChanged:n.updateTheme,class:"ml-8 bg-primary-light dark:bg-ternary-dark px-3 py-2 shadow-sm rounded-xl cursor-pointer"},null,8,["theme","onThemeChanged"])])])])}const f={key:0,"data-feather":"moon",class:"text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},x={key:1,"data-feather":"sun",class:"text-gray-200 hover:text-gray-50 w-5"};function y(e,t,s,o,n,l){return(0,r.uX)(),(0,r.CE)("a",{href:"#",onClick:t[0]||(t[0]=(0,a.D$)(((...e)=>l.toggleTheme&&l.toggleTheme(...e)),["prevent"])),"aria-label":"Theme Switcher"},["light"===s.theme?((0,r.uX)(),(0,r.CE)("i",f)):((0,r.uX)(),(0,r.CE)("i",x))])}var v={props:{theme:{type:String,required:!0}},methods:{toggleTheme(){const e="light"===this.theme?"dark":"light";localStorage.setItem("theme",e),this.$emit("themeChanged",e),this.$router.go()}}},k=s(1241);const b=(0,k.A)(v,[["render",y]]);var w=b,L=s(740),_=s.n(L);function C(e,t,s,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)([s.isOpen?"block":"hidden","m-0 sm:ml-4 mt-5 sm:mt-3 sm:flex p-5 sm:p-0 justify-center items-center shadow-lg sm:shadow-none"])},[(0,r.bF)(i,{to:"/",class:"font-general-medium block text-left text-lg font-medium text-primary-dark dark:text-white hover:text-indigo-600 dark:hover:text-indigo-300 sm:mx-4 mb-2 sm:py-2","aria-label":"Home"},{default:(0,r.k6)((()=>[(0,r.eW)("Home")])),_:1}),(0,r.bF)(i,{to:"/About",class:"font-general-medium block text-left text-lg font-medium text-primary-dark dark:text-ternary-light hover:text-indigo-600 dark:hover:text-indigo-300 sm:mx-4 mb-2 sm:py-2","aria-label":"About"},{default:(0,r.k6)((()=>[(0,r.eW)("About")])),_:1})],2)}var A={props:["showModal","isOpen"]};const S=(0,k.A)(A,[["render",C]]);var E=S,M={components:{ThemeSwitcher:w,AppHeaderLinks:E},data(){return{isOpen:!1,theme:""}},created(){this.theme=localStorage.getItem("theme")||"light"},mounted(){_().replace(),this.theme=localStorage.getItem("theme")||"light"},methods:{updateTheme(e){this.theme=e}},updated(){_().replace()}};const X=(0,k.A)(M,[["render",g],["__scopeId","data-v-7ec00a92"]]);var T=X,V={components:{AppHeader:T},data:()=>({appTheme:localStorage.getItem("theme")}),mounted(){_().replace()},updated(){_().replace()}};const O=(0,k.A)(V,[["render",n]]);var j=O,P=s(782),W=(0,P.y$)({state:{spaceMap:new Map},getters:{},mutations:{},actions:{},modules:{}}),B=s(1387);const q={class:"mx-5"},F={class:"mx-auto max-w-5xl"},I=(0,r.Lk)("header",null,[(0,r.Lk)("h1",{class:"text-6xl leading-normal mb-2 font-serif text-gray-700 dark:text-gray-100 transition-colors"}," Snapshot Voting ")],-1),Q=(0,r.Lk)("p",{class:"ml-4 mb-5 font-serif text-gray-700 dark:text-gray-100 transition-colors"}," Vote multiple proposals in one shot ",-1),$=(0,r.Lk)("h1",{class:"text-2xl leading-normal mb-2 font-serif text-gray-700 dark:text-gray-100 transition-colors"}," Space ",-1),D={class:"mb-3 relative text-gray-700"},K=(0,r.Lk)("option",{value:"none",hidden:""},"Select a Space",-1),z=["value"],H={for:"default-toggle",class:"inline-flex relative items-center mb-4 cursor-pointer mt-2 ml-2"},N=(0,r.Lk)("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),G=(0,r.Lk)("span",{class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},"Use MetaMask ",-1),J={key:1,class:"mx-auto max-w-4xl mb-5 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},Y=(0,r.Lk)("span",{class:"block sm:inline"},"No proposals found or all proposals have been voted!",-1),R=(0,r.Lk)("svg",{class:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,r.Lk)("title",null,"Close"),(0,r.Lk)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),U=[R];function Z(e,t,s,n,l,i){const c=(0,r.g2)("ConnectAccount"),d=(0,r.g2)("ProposalsList"),u=(0,r.g2)("KeysInput"),p=(0,r.g2)("MetamaskVote");return(0,r.uX)(),(0,r.CE)("div",q,[(0,r.Lk)("div",F,[I,Q,$,(0,r.Lk)("div",D,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected=e),onChange:t[1]||(t[1]=(...e)=>i.getActiveProposals&&i.getActiveProposals(...e)),class:"w-full h-10 pl-3 pr-8 text-base placeholder-gray-600 border rounded-lg focus:shadow-outline disabled:cursor-not-allowed"},[K,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.options,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.value,value:e.value},(0,o.v_)(e.text),9,z)))),128))],544),[[a.u1,l.selected]]),(0,r.Lk)("label",H,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>l.useMetamask=e),"true-value":"true","false-value":"false",id:"default-toggle",class:"sr-only peer",onChange:t[3]||(t[3]=(...e)=>i.toggle&&i.toggle(...e))},null,544),[[a.lH,l.useMetamask]]),N,G,l.address.length>0?((0,r.uX)(),(0,r.Wv)(c,{key:0,address:l.address,class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},null,8,["address"])):(0,r.Q3)("",!0)])]),l.proposals.length>0?((0,r.uX)(),(0,r.Wv)(d,{key:0,proposals:l.proposals,useMetamask:l.useMetamask,class:"mx-auto max-w-5xl"},null,8,["proposals","useMetamask"])):(0,r.Q3)("",!0),0==l.proposals.length&&l.ready?((0,r.uX)(),(0,r.CE)("div",J,[Y,(0,r.Lk)("span",{class:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:t[4]||(t[4]=(...e)=>i.close&&i.close(...e))},U)])):(0,r.Q3)("",!0)]),l.proposals.length>0&&("false"===l.useMetamask||!1===l.useMetamask)?((0,r.uX)(),(0,r.Wv)(u,{key:0,proposals:l.proposals,class:"mx-auto max-w-5xl mb-10"},null,8,["proposals"])):(0,r.Q3)("",!0),l.proposals.length>0&&("true"===l.useMetamask||!0===l.useMetamask)?((0,r.uX)(),(0,r.Wv)(p,{key:1,proposals:l.proposals,class:"mx-auto max-w-5xl mb-10"},null,8,["proposals"])):(0,r.Q3)("",!0)])}s(4114);const ee=[{id:"shutterdao0x36.eth",name:"Shutter DAO 0x36"},{id:"polls.lenster.xyz",name:"Hey Polls"},{id:"incrementdao.eth",name:"Increment"},{id:"etherscoredao.eth",name:"EtherScore"},{id:"arbitrumfoundation.eth",name:"Arbitrum DAO"},{id:"klimadao.eth",name:"Klima DAO"},{id:"ens.eth",name:"ENS"},{id:"aave.eth",name:"AAVE"},{id:"stgdao.eth",name:"Stargate DAO"},{id:"sismo.eth",name:"Sismo"},{id:"mail3.eth",name:"Mail3"}];var te=s(2213),se=s(6694),ae=s(4175),re=s(4348);function oe(e){let t=new se.uW(e);return t}function ne(e){try{new se.uW(e)}catch(t){return re.log(t),!1}return!0}async function le(e){try{if("true"===e||!0===e){let e=new ae.j(window.ethereum);const t=await e.send("eth_requestAccounts");return t[0]}}catch(t){re.info("info","user reject connect wallet")}return""}const ie={class:"min-h-full"},ce={class:"overflow-x-auto w-full"},de={class:"mx-auto w-full rounded-lg bg-white divide-gray-300 overflow-hidden"},ue={class:"bg-gray-900"},pe={class:"text-white text-left"},he=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center"}," Select ",-1),me={key:0,class:"font-semibold text-sm uppercase px-2 py-2 text-center"},ge={key:1,class:"font-semibold text-sm uppercase px-2 py-2 text-center"},fe=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center"}," Space ",-1),xe=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center"}," Title ",-1),ye=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center hidden md:table-cell"}," Voting Start Time ",-1),ve=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center hidden md:table-cell"}," Voting End Time ",-1),ke=(0,r.Lk)("th",{class:"font-semibold text-sm uppercase px-2 py-2 text-center"}," Choice ",-1),be={class:"divide-y divide-gray-200"},we={class:"px-2 py-2 text-center"},Le=["value","onChange"],_e={key:0,class:"px-2 py-2 text-center"},Ce={class:"text-center"},Ae={key:1,class:"px-5 py-5 text-center"},Se={class:"text-center"},Ee={key:0},Me={class:"group relative"},Xe=(0,r.Lk)("i",{"data-feather":"clock",class:"stroke-orange-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Te={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-48 px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},Ve={key:1},Oe={class:"group relative"},je=(0,r.Lk)("i",{alt:"test","data-feather":"x-circle",class:"stroke-red-600 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Pe={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},We={key:2},Be={class:"group relative"},qe=(0,r.Lk)("i",{"data-feather":"check-circle",class:"stroke-green-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Fe={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},Ie={key:3,class:"flex justify-right"},Qe={class:"group relative flex justify-right"},$e=(0,r.Lk)("i",{"data-feather":"alert-circle",class:"stroke-red-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),De={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},Ke={class:"px-2 py-2 text-center"},ze={class:"text-center"},He={class:"px-2 py-2 text-center"},Ne={class:"text-center"},Ge=["href"],Je={class:"px-2 py-2 text-center hidden md:table-cell"},Ye={class:"px-2 py-2 text-center hidden md:table-cell"},Re={class:"text-left"},Ue=["value","onChange"],Ze=["value"],et={key:1,class:"text-left w-48 border-solid border-2 rounded-md"},tt=(0,r.Lk)("option",{selected:"",value:"all"},"Vote for All",-1),st=[tt],at={key:2,class:"text-left w-48 border-solid border-2 rounded-md"},rt=(0,r.Lk)("option",{selected:"",value:"all"},"Vote for All",-1),ot=[rt];function nt(e,t,s,n,l,i){return(0,r.uX)(),(0,r.CE)("div",ie,[(0,r.Lk)("div",ce,[(0,r.Lk)("table",de,[(0,r.Lk)("thead",ue,[(0,r.Lk)("tr",pe,[he,"false"===s.useMetamask||!1===s.useMetamask?((0,r.uX)(),(0,r.CE)("th",me," # ")):(0,r.Q3)("",!0),!0===s.useMetamask||"true"===s.useMetamask?((0,r.uX)(),(0,r.CE)("th",ge," Status ")):(0,r.Q3)("",!0),fe,xe,ye,ve,ke])]),(0,r.Lk)("tbody",be,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.proposals,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t,class:"hover:bg-blue-100"},[(0,r.Lk)("td",we,[(0,r.Lk)("input",{type:"checkbox",checked:"proposal.select",value:e.select,onChange:(0,a.D$)((t=>i.selectChange(t.target.value,e)),["stop"]),class:"w-12 border-solid border-2 rounded-md"},null,40,Le)]),"false"===s.useMetamask||!1===s.useMetamask?((0,r.uX)(),(0,r.CE)("td",_e,[(0,r.Lk)("div",Ce,[(0,r.Lk)("div",null,[(0,r.Lk)("p",null,(0,o.v_)(t+1),1)])])])):(0,r.Q3)("",!0),"true"===s.useMetamask||!0===s.useMetamask?((0,r.uX)(),(0,r.CE)("td",Ae,[(0,r.Lk)("div",Se,[(0,r.Lk)("div",null,["ready"===e.status_code?((0,r.uX)(),(0,r.CE)("span",Ee,[(0,r.Lk)("div",Me,[Xe,(0,r.Lk)("span",Te,(0,o.v_)(e.status_message),1)])])):"error"===e.status_code?((0,r.uX)(),(0,r.CE)("span",Ve,[(0,r.eW)((0,o.v_)(e.statu_code)+" ",1),(0,r.Lk)("div",Oe,[je,(0,r.Lk)("span",Pe,(0,o.v_)(e.status_message),1)])])):"success"===e.status_code?((0,r.uX)(),(0,r.CE)("span",We,[(0,r.Lk)("div",Be,[qe,(0,r.Lk)("span",Fe,(0,o.v_)(e.status_message),1)])])):"voted"==e.status_code?((0,r.uX)(),(0,r.CE)("span",Ie,[(0,r.Lk)("div",Qe,[$e,(0,r.Lk)("span",De,(0,o.v_)(e.status_message),1)])])):(0,r.Q3)("",!0)])])])):(0,r.Q3)("",!0),(0,r.Lk)("td",Ke,[(0,r.Lk)("div",ze,[(0,r.Lk)("div",null,[(0,r.Lk)("p",null,(0,o.v_)(i.getSpace(e.space)),1)])])]),(0,r.Lk)("td",He,[(0,r.Lk)("div",Ne,[(0,r.Lk)("div",null,[(0,r.Lk)("a",{target:"_blank",href:`https://snapshot.org/#/${e.space}/proposal/${e.id}`},(0,o.v_)(e.title),9,Ge)])])]),(0,r.Lk)("td",Je,(0,o.v_)(i.getDate(e.start)),1),(0,r.Lk)("td",Ye,(0,o.v_)(i.getDate(e.end)),1),(0,r.Lk)("td",Re,["single-choice"===e.type||"basic"===e.type?((0,r.uX)(),(0,r.CE)("select",{key:0,value:e.vote,class:"text-left w-48 border-solid border-2 rounded-md",onChange:(0,a.D$)((t=>i.change(t.target.value,e)),["stop"])},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.choices,((e,t)=>((0,r.uX)(),(0,r.CE)("option",{key:t,value:t+1},(0,o.v_)(e),9,Ze)))),128))],40,Ue)):(0,r.Q3)("",!0),"approval"===e.type?((0,r.uX)(),(0,r.CE)("select",et,st)):(0,r.Q3)("",!0),"ranked-choice"===e.type?((0,r.uX)(),(0,r.CE)("select",at,ot)):(0,r.Q3)("",!0)])])))),128))])])])])}var lt=s(4348),it={props:["proposals","useMetamask"],data(){return{selected:"1"}},mounted(){_().replace()},updated(){_().replace(),lt.log(this.proposals)},methods:{change(e,t){t.vote=e},selectChange(e,t){t.select=!t.select},getDate(e){return new Date(1e3*e).toLocaleString()},getSpace(e){return this.$store.state.spaceMap.get(e).name}}};const ct=(0,k.A)(it,[["render",nt]]);var dt=ct;const ut={class:"fixed bottom-0 left-0 h-5 bg-blue-200 w-screen text-gray-700 z-40"},pt=(0,r.Fv)('<div class="flex flex-row-reverse mr-5 justify-center items-center"><div class="cursor-pointer self-center"><a href="https://twitter.com/ericet369" class="keychainify-checked" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="self-center" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg></a></div><p class="text-sm font-mono mx-1"></p><div class="cursor-pointer self-center"><a href="https://github.com/ericet/snapshot" class="keychainify-checked" target="_blank"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="self-center" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div><p class="text-sm font-mono mx-2"> Built by <a href="https://ericet.xyz" target="_blank">ericet</a></p></div>',1),ht=[pt];function mt(e,t){return(0,r.uX)(),(0,r.CE)("div",ut,ht)}const gt={},ft=(0,k.A)(gt,[["render",mt]]);var xt=ft;const yt={class:"mx-auto max-w-2xl mt-4"};function vt(e,t,s,a,o,n){const l=(0,r.g2)("AccountsGrid"),i=(0,r.g2)("KeyVote");return(0,r.uX)(),(0,r.CE)("div",yt,[(0,r.Lk)("textarea",{rows:"10",onInput:t[0]||(t[0]=e=>n.getKeys(e)),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"One private key per line"},null,32),(0,r.bF)(l,{accounts:o.accounts},null,8,["accounts"]),o.accounts.length>0?((0,r.uX)(),(0,r.Wv)(i,{key:0,accounts:o.accounts},null,8,["accounts"])):(0,r.Q3)("",!0)])}const kt={class:"flex flex-col justify-center items-center"};function bt(e,t,s,a,o,n){return(0,r.uX)(),(0,r.CE)("div",kt,[(0,r.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>n.vote&&n.vote(...e)),class:"mt-4 mb-8 text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Vote ")])}var wt={props:["accounts"],methods:{async vote(){this.clearVoteStatus();for(let e of this.accounts){let t=e.key,s=e.proposals;this.startVoting(t,s)}},clearVoteStatus(){for(let e of this.accounts)for(let t of e.proposals)t.status_code="",t.status_message=""},async startVoting(e,t){let s=oe(e),a="";for(let r of t){let e=await(0,te.hasVoted)(s.address,r.id);if(e)r.status_code="voted",r.status_message="This proposal has already Voted";else if(a!==r.space){let e=await(0,te.getVotingPowers)(r.id,s.address);a=r.space,0==e?(r.status_code="error",r.status_message="You don't have Voting Power to vote"):(r.status_code="ready",r.status_message="Ready to vote",await(0,te.vote)(s,r,"false"))}else r.status_code="error",r.status_message="You don't have Voting Power to vote"}}}};const Lt=(0,k.A)(wt,[["render",bt]]);var _t=Lt;const Ct={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 mt-6 sm:gap-10"};function At(e,t,s,a,o,n){const l=(0,r.g2)("AccountSingleVue");return(0,r.uX)(),(0,r.CE)("div",Ct,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.accounts,((e,t)=>((0,r.uX)(),(0,r.Wv)(l,{key:t,proposals:e.proposals,number:t+1},null,8,["proposals","number"])))),128))])}const St={class:"px-2 py-2 rounded-xl shadow-lg hover:shadow-xl hover:bg-blue-100 cursor-pointer mb-10 sm:mb-0 mr-2 bg-secondary-light dark:bg-ternary-dark"},Et={class:"text-lg font-medium text-gray-800 dark:text-gray-100"},Mt={class:"flex justify-between items-center mx-2"},Xt={key:0},Tt={class:"group relative"},Vt=(0,r.Lk)("i",{"data-feather":"clock",class:"stroke-orange-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Ot={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-48 px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},jt={key:1},Pt={class:"group relative"},Wt=(0,r.Lk)("i",{alt:"test","data-feather":"x-circle",class:"stroke-red-600 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Bt={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},qt={key:2},Ft={class:"group relative"},It=(0,r.Lk)("i",{"data-feather":"check-circle",class:"stroke-green-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),Qt={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"},$t={key:3,class:"flex justify-right"},Dt={class:"group relative flex justify-right"},Kt=(0,r.Lk)("i",{"data-feather":"alert-circle",class:"stroke-red-300 text-liText-ternary-dark hover:text-gray-400 dark:text-liText-ternary-light dark:hover:text-liBorder-primary-light w-5"},null,-1),zt={class:"absolute hidden group-hover:flex -top-1 -right-3 translate-x-full w-auto px-2 py-1 bg-gray-700 rounded-lg text-center text-white text-sm"};function Ht(e,t,s,a,n,l){return(0,r.uX)(),(0,r.CE)("div",St,[(0,r.Lk)("p",Et," Wallet "+(0,o.v_)(s.number),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.proposals,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"font-general-semibold text-sm text-ternary-dark dark:text-ternary-light font-semibold mb-4",key:t},[(0,r.Lk)("div",Mt,[(0,r.eW)((0,o.v_)(l.getSpace(e.space))+":【"+(0,o.v_)(t+1)+"】 ",1),"ready"==e.status_code?((0,r.uX)(),(0,r.CE)("span",Xt,[(0,r.Lk)("div",Tt,[Vt,(0,r.Lk)("span",Ot,(0,o.v_)(e.status_message),1)])])):"error"==e.status_code?((0,r.uX)(),(0,r.CE)("span",jt,[(0,r.Lk)("div",Pt,[Wt,(0,r.Lk)("span",Bt,(0,o.v_)(e.status_message),1)])])):"success"==e.status_code?((0,r.uX)(),(0,r.CE)("span",qt,[(0,r.Lk)("div",Ft,[It,(0,r.Lk)("span",Qt,(0,o.v_)(e.status_message),1)])])):"voted"==e.status_code?((0,r.uX)(),(0,r.CE)("span",$t,[(0,r.Lk)("div",Dt,[Kt,(0,r.Lk)("span",zt,(0,o.v_)(e.status_message),1)])])):(0,r.Q3)("",!0)])])))),128))])}var Nt={props:["proposals","number"],mounted(){_().replace()},methods:{getSpace(e){return this.$store.state.spaceMap.get(e).name}},updated(){_().replace()}};const Gt=(0,k.A)(Nt,[["render",Ht]]);var Jt=Gt,Yt={components:{AccountSingleVue:Jt},props:["accounts"]};const Rt=(0,k.A)(Yt,[["render",At]]);var Ut=Rt,Zt={props:["proposals"],components:{KeyVote:_t,AccountsGrid:Ut},data(){return{input:"",keys:[],accounts:[]}},methods:{getKeys(e){this.keys=[];let t=e.target.value.split("\n");for(let s of t)s.length>0&&ne(s.trim())&&this.keys.push(s.trim());this.proposals&&this.getVoteWallet()},getVoteWallet(){this.accounts=[];for(let e of this.keys)this.accounts.push({key:e,proposals:this.proposals})}}};const es=(0,k.A)(Zt,[["render",vt]]);var ts=es;const ss={class:"flex flex-col justify-center items-center"};function as(e,t,s,a,o,n){return(0,r.uX)(),(0,r.CE)("div",ss,[(0,r.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>n.handleVote&&n.handleVote(...e)),disabled:!0,class:"mt-4 mb-8 text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Vote ")])}var rs={props:["proposals"],data(){return{loading:!1}},methods:{async handleVote(){this.clearVoteStatus(),this.startVoting(this.proposals)},clearVoteStatus(){for(let e of this.proposals)e.status_code="",e.status_message=""},async startVoting(e){this.loading=!0;let t=new ae.j(window.ethereum);const s=await t.send("eth_requestAccounts");let a="",r=!1,o={};o.address=s[0];try{for(let t of e)if(t.select){let e=await(0,te.hasVoted)(o.address,t.id);if(e)t.status_code="voted",t.status_message="This proposal has already Voted";else if(a!==t.space||r){let e=await(0,te.getVotingPowers)(t.id,o.address);a=t.space,0==e?(t.status_code="error",t.status_message="You don't have Voting Power to vote"):(t.status_code="ready",t.status_message="Ready to vote",await(0,te.vote)(o,t,"true"),r=!0)}else t.status_code="error",t.status_message="You don't have Voting Power to vote"}this.loading=!1}catch(n){this.loading=!1}}}};const os=(0,k.A)(rs,[["render",as]]);var ns=os;const ls={id:"connected"};function is(e,t,s,a,n,l){return(0,r.uX)(),(0,r.CE)("div",ls,[(0,r.Lk)("section",null,[(0,r.Lk)("p",null,[(0,r.eW)(" Connected As "),(0,r.Lk)("b",null,(0,o.v_)(s.address),1)])])])}var cs={props:["address"]};const ds=(0,k.A)(cs,[["render",is]]);var us=ds,ps={mounted(){window.ethereum&&window.ethereum.on("accountsChanged",(()=>{this.proposals=[],this.selected="none",this.ready=!1,this.response={},this.populateOptions(),this.updateAddress(this.useMetamask)}))},created(){for(let e of ee)this.$store.state.spaceMap.set(e.id,e);this.populateOptions(),this.updateAddress(this.useMetamask)},data(){return{selected:"none",proposals:[],spacesList:ee,options:[],ready:!1,useMetamask:!0,address:""}},methods:{close(){this.response={}},async toggle(){this.populateOptions(),this.updateAddress(this.useMetamask)},async updateAddress(){this.address=await le(this.useMetamask)},populateOptions(){this.options=[],this.options.push({text:"All Spaces",value:"all"});for(let e of ee)this.options.push({text:e.name,value:e.id});this.options.sort(((e,t)=>"All Spaces"===e.text||"All Spaces"===t.text?1:e.text<t.text?-1:e.text>t.text?1:0))},async getActiveProposals(){if(this.ready=!1,this.proposals=[],"all"===this.selected)for(let e of this.spacesList){let t=await(0,te.getActiveProposals)(e.id);if(t.length>0)for(let e of t)this.proposals.push(e)}else this.proposals=await(0,te.getActiveProposals)(this.selected);this.ready=!0}},components:{ProposalsList:dt,AppFooter:xt,KeysInput:ts,MetamaskVote:ns,ConnectAccount:us}};const hs=(0,k.A)(ps,[["render",Z]]);var ms=hs;const gs=[{path:"/",name:"home",component:ms}],fs=(0,B.aE)({history:(0,B.Bt)(),routes:gs});var xs=fs;const ys=s(740);ys.replace(),(0,a.Ef)(j).use(W).use(xs).mount("#app");const vs=localStorage.getItem("theme");"dark"===vs&&document.querySelector("body").classList.contains("app-theme")?document.querySelector("body").classList.add("bg-primary-dark"):document.querySelector("body").classList.add("bg-slate-50")},2213:function(e,t,s){var a=s(4348);s(4114);const{ethers:r}=s(6420),o=s(8337),n=s(788),l=new r.providers.JsonRpcProvider("https://rpc.ankr.com/eth");async function i(e,t,s){const{domain:a,types:o,message:n}=t.data,l=new r.Wallet(e.privateKey,s);return await l._signTypedData(a,o,n)}async function c(e){const t={method:"post",url:"https://hub.snapshot.org/api/msg",headers:{authority:"hub.snapshot.org",accept:"application/json","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","content-type":"application/json",origin:"https://snapshot.org",referer:"https://snapshot.org/","sec-ch-ua":'"Google Chrome";v="105", "Not)A;Brand";v="8", "Chromium";v="105"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36"},data:JSON.stringify(e)};let s={};try{const e=await n(t);if(e.data.id)return s.status_code="success",s.status_message="Successfully voted!",s}catch(a){return s.status_code="error",s.status_message="Vote Failed: "+a.response.data,s}}async function d(e,t,s){const n=o.utils.toChecksumAddress(e.address);let d;if("approval"===t.type||"ranked-choice"===t.type){let e=[];for(let s=1;s<=t.choices.length;s++)e.push(s);d={address:n,data:{domain:{name:"snapshot",version:"0.1.4"},types:{Vote:[{name:"from",type:"address"},{name:"space",type:"string"},{name:"timestamp",type:"uint64"},{name:"proposal",type:"string"},{name:"choice",type:"uint32[]"},{name:"reason",type:"string"},{name:"app",type:"string"}]},message:{space:t.space,proposal:t.id,choice:e,app:"snapshot",reason:"",from:n,timestamp:Math.floor(Date.now()/1e3)}}}}else d={address:n,data:{domain:{name:"snapshot",version:"0.1.4"},types:{Vote:[{name:"from",type:"address"},{name:"space",type:"string"},{name:"timestamp",type:"uint64"},{name:"proposal",type:"string"},{name:"choice",type:"uint32"},{name:"reason",type:"string"},{name:"app",type:"string"}]},message:{space:t.space,proposal:t.id,choice:Number(t.vote),app:"snapshot",reason:"",from:n,timestamp:Math.floor(Date.now()/1e3)}}};try{if("true"===s||!0===s){if(!window.ethereum)return void alert("Please install Metamask");await window.ethereum.enable();const e=new r.providers.Web3Provider(window.ethereum).getSigner(),{domain:t,types:s,message:a}=d.data;d.sig=await e._signTypedData(t,s,a)}else d.sig=await i(e,d,l)}catch(p){a.info("info","user reject connect wallet")}let u=await c(d);t.status_code=u.status_code,t.status_message=u.status_message}async function u(e,t){const s="https://hub.snapshot.org/graphql",a={query:`query Votes {\n        votes (\n          first: 1\n          where: {\n            proposal: "${t}",\n            voter: "${e}"\n          }\n        ) {\n          id\n          voter\n          created\n          vp\n          choice\n          space {\n            id\n          }\n        }\n      }\n    `},r=await n.post(s,a);return r.data.data.votes.length>0}async function p(e){const t=await fetch("https://hub.snapshot.org/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:`{"operationName":"Proposal","variables":{"id":"${e}"},"query":"query Proposal($id: String!) {\\n  proposal(id: $id) {\\n    id\\n    ipfs\\n    title\\n    body\\n    choices\\n    start\\n    end\\n    snapshot\\n    state\\n    author\\n    created\\n    plugins\\n    network\\n    type\\n    strategies {\\n      name\\n   network\\n   params\\n    }\\n    space {\\n      id\\n      name\\n    }\\n    scores_state\\n    scores\\n    scores_by_strategy\\n    scores_total\\n    votes\\n  }\\n}"}`});return JSON.parse(await t.text()).data.proposal}async function h(e,t){const s=await p(e),a=await fetch("https://score.snapshot.org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"get_vp",params:{space:s.space.id,delegation:!1,network:s.network,snapshot:parseInt(s.snapshot),strategies:s.strategies,address:t}})});let r=(await a.json()).result.vp;return r}async function m(e){const t="https://hub.snapshot.org/graphql?",s={query:`query Proposals {\n      proposals(first: 20, skip: 0, where: {space_in: ["${e}"], state: "active"}, orderBy: "created", orderDirection: desc) {\n        id\n        title\n        body\n        choices\n        start\n        end\n        snapshot\n        state\n        author\n        type\n        app\n        space {\n          id\n          name\n        }\n      }\n    }`},a=await n.post(t,s);return a.data.data.proposals.map((t=>({space:e,id:t.id,title:t.title,type:t.type,choices:t.choices,start:t.start,end:t.end,vote:"approval"===t.type?"all":"1",select:!0})))}e.exports={vote:d,hasVoted:u,getVotingPowers:h,getActiveProposals:m}},1848:function(){},8954:function(){}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,a,r,o){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,i=0;i<a.length;i++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,n=a[0],l=a[1],i=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(i)var d=i(s)}for(t&&t(a);c<n.length;c++)o=n[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunksnapshot_voting"]=self["webpackChunksnapshot_voting"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(8051)}));a=s.O(a)})();
//# sourceMappingURL=app.d9b2f51a.js.map